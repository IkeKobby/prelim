<svg width="1200" height="700" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="controllerGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#1e40af;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#3b82f6;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="slmGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#60a5fa;stop-opacity:0.9" />
      <stop offset="100%" style="stop-color:#93c5fd;stop-opacity:0.9" />
    </linearGradient>
    <linearGradient id="validateGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#10b981;stop-opacity:0.9" />
      <stop offset="100%" style="stop-color:#34d399;stop-opacity:0.9" />
    </linearGradient>
    <linearGradient id="escalateGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f59e0b;stop-opacity:0.9" />
      <stop offset="100%" style="stop-color:#fbbf24;stop-opacity:0.9" />
    </linearGradient>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#1e40af"/>
    </marker>
    <marker id="arrowDown" markerWidth="10" markerHeight="10" refX="5" refY="9" orient="auto">
      <polygon points="0 0, 10 6, 5 9, 0 6" fill="#1e40af"/>
    </marker>
    <marker id="arrowUp" markerWidth="10" markerHeight="10" refX="5" refY="1" orient="auto">
      <polygon points="5 0, 10 6, 0 6, 5 1" fill="#10b981"/>
    </marker>
    <filter id="shadow">
      <feGaussianBlur in="SourceAlpha" stdDeviation="2"/>
      <feOffset dx="2" dy="2"/>
      <feComponentTransfer><feFuncA type="linear" slope="0.3"/></feComponentTransfer>
      <feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>
    </filter>
  </defs>
  
  <rect width="1200" height="700" fill="#ffffff"/>
  
  <!-- Title -->
  <text x="600" y="30" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#1e3a8a" text-anchor="middle">Project 1: SLM-First Automated Feature Engineering Architecture</text>
  
  <!-- Input: Dataset -->
  <rect x="50" y="60" width="200" height="50" rx="5" fill="#e0e7ff" stroke="#6366f1" stroke-width="2"/>
  <text x="150" y="80" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#1e3a8a" text-anchor="middle">Input Dataset</text>
  <text x="150" y="95" font-family="Arial, sans-serif" font-size="10" fill="#475569" text-anchor="middle">Schema + Context</text>
  <text x="150" y="107" font-family="Arial, sans-serif" font-size="10" fill="#475569" text-anchor="middle">Sample Data</text>
  
  <!-- Controller -->
  <rect x="350" y="50" width="500" height="70" rx="8" fill="url(#controllerGrad)" filter="url(#shadow)"/>
  <text x="600" y="75" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#ffffff" text-anchor="middle">Controller</text>
  <text x="600" y="95" font-family="Arial, sans-serif" font-size="11" fill="#e0e7ff" text-anchor="middle">Route by Feature Type • Manage Iterations • Track Execution State</text>
  <text x="600" y="110" font-family="Arial, sans-serif" font-size="11" fill="#e0e7ff" text-anchor="middle">Implement Escalation Logic</text>
  
  <!-- Arrow from input to controller -->
  <path d="M 250 85 L 350 85" stroke="#6366f1" stroke-width="3" fill="none" marker-end="url(#arrow)"/>
  
  <!-- Specialized SLM Agents -->
  <text x="600" y="160" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#1e3a8a" text-anchor="middle">Specialized SLM Agents</text>
  
  <!-- Temporal Feature Agent -->
  <rect x="80" y="180" width="280" height="140" rx="6" fill="url(#slmGrad)" filter="url(#shadow)"/>
  <rect x="90" y="190" width="260" height="25" rx="3" fill="#1e40af" opacity="0.8"/>
  <text x="220" y="207" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#ffffff" text-anchor="middle">Temporal Feature Agent</text>
  <text x="220" y="230" font-family="Arial, sans-serif" font-size="11" fill="#1e3a8a" text-anchor="middle" font-weight="bold">2B SLM</text>
  <line x1="100" y1="240" x2="340" y2="240" stroke="#1e40af" stroke-width="1"/>
  <text x="220" y="258" font-family="Arial, sans-serif" font-size="9" fill="#1e3a8a" text-anchor="middle">• Date/Time transformations</text>
  <text x="220" y="273" font-family="Arial, sans-serif" font-size="9" fill="#1e3a8a" text-anchor="middle">• Period extraction</text>
  <text x="220" y="288" font-family="Arial, sans-serif" font-size="9" fill="#1e3a8a" text-anchor="middle">• Time-based aggregations</text>
  <text x="220" y="303" font-family="Arial, sans-serif" font-size="9" fill="#1e3a8a" text-anchor="middle">• Temporal combinations</text>
  
  <!-- Categorical Feature Agent -->
  <rect x="460" y="180" width="280" height="140" rx="6" fill="url(#slmGrad)" filter="url(#shadow)"/>
  <rect x="470" y="190" width="260" height="25" rx="3" fill="#1e40af" opacity="0.8"/>
  <text x="600" y="207" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#ffffff" text-anchor="middle">Categorical Feature Agent</text>
  <text x="600" y="230" font-family="Arial, sans-serif" font-size="11" fill="#1e3a8a" text-anchor="middle" font-weight="bold">2B SLM</text>
  <line x1="480" y1="240" x2="720" y2="240" stroke="#1e40af" stroke-width="1"/>
  <text x="600" y="258" font-family="Arial, sans-serif" font-size="9" fill="#1e3a8a" text-anchor="middle">• Encoding strategies</text>
  <text x="600" y="273" font-family="Arial, sans-serif" font-size="9" fill="#1e3a8a" text-anchor="middle">• One-hot, target, frequency</text>
  <text x="600" y="288" font-family="Arial, sans-serif" font-size="9" fill="#1e3a8a" text-anchor="middle">• Category combinations</text>
  <text x="600" y="303" font-family="Arial, sans-serif" font-size="9" fill="#1e3a8a" text-anchor="middle">• Cross-feature interactions</text>
  
  <!-- Numerical Feature Agent -->
  <rect x="840" y="180" width="280" height="140" rx="6" fill="url(#slmGrad)" filter="url(#shadow)"/>
  <rect x="850" y="190" width="260" height="25" rx="3" fill="#1e40af" opacity="0.8"/>
  <text x="980" y="207" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#ffffff" text-anchor="middle">Numerical Feature Agent</text>
  <text x="980" y="230" font-family="Arial, sans-serif" font-size="11" fill="#1e3a8a" text-anchor="middle" font-weight="bold">2.4B SLM</text>
  <line x1="860" y1="240" x2="1100" y2="240" stroke="#1e40af" stroke-width="1"/>
  <text x="980" y="258" font-family="Arial, sans-serif" font-size="9" fill="#1e3a8a" text-anchor="middle">• Mathematical transformations</text>
  <text x="980" y="273" font-family="Arial, sans-serif" font-size="9" fill="#1e3a8a" text-anchor="middle">• Binning strategies</text>
  <text x="980" y="288" font-family="Arial, sans-serif" font-size="9" fill="#1e3a8a" text-anchor="middle">• Polynomial features</text>
  <text x="980" y="303" font-family="Arial, sans-serif" font-size="9" fill="#1e3a8a" text-anchor="middle">• Statistical aggregations</text>
  
  <!-- Arrows from controller to agents -->
  <path d="M 450 120 Q 220 150 220 180" stroke="#1e40af" stroke-width="2.5" fill="none" marker-end="url(#arrowDown)"/>
  <path d="M 600 120 L 600 180" stroke="#1e40af" stroke-width="2.5" fill="none" marker-end="url(#arrowDown)"/>
  <path d="M 750 120 Q 980 150 980 180" stroke="#1e40af" stroke-width="2.5" fill="none" marker-end="url(#arrowDown)"/>
  
  <!-- Code Generation Output -->
  <rect x="80" y="350" width="1040" height="50" rx="5" fill="#f3f4f6" stroke="#6b7280" stroke-width="2"/>
  <text x="600" y="370" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#1e3a8a" text-anchor="middle">Generated Python Code (Pandas)</text>
  <text x="600" y="388" font-family="Arial, sans-serif" font-size="10" fill="#475569" text-anchor="middle">CAAFE-style code generation with feature name, explanation, and executable transformations</text>
  
  <!-- Arrows from agents to code generation -->
  <path d="M 220 320 L 220 350" stroke="#3b82f6" stroke-width="2" fill="none" marker-end="url(#arrowDown)"/>
  <path d="M 600 320 L 600 350" stroke="#3b82f6" stroke-width="2" fill="none" marker-end="url(#arrowDown)"/>
  <path d="M 980 320 L 980 350" stroke="#3b82f6" stroke-width="2" fill="none" marker-end="url(#arrowDown)"/>
  
  <!-- Validation Framework -->
  <rect x="300" y="430" width="600" height="120" rx="8" fill="url(#validateGrad)" filter="url(#shadow)"/>
  <text x="600" y="455" font-family="Arial, sans-serif" font-size="15" font-weight="bold" fill="#ffffff" text-anchor="middle">Validation Framework</text>
  <text x="600" y="475" font-family="Arial, sans-serif" font-size="11" fill="#ecfdf5" text-anchor="middle">Sandboxed Execution • Cross-Validation • Performance-Based Acceptance</text>
  <line x1="320" y1="485" x2="880" y2="485" stroke="#ecfdf5" stroke-width="1"/>
  <text x="320" y="505" font-family="Arial, sans-serif" font-size="10" fill="#ecfdf5">Metrics: Accuracy &amp; ROC AUC</text>
  <text x="320" y="522" font-family="Arial, sans-serif" font-size="10" fill="#ecfdf5">Accept if: P' &gt; P (improvement)</text>
  <text x="320" y="539" font-family="Arial, sans-serif" font-size="10" fill="#ecfdf5">Reject if: P' ≤ P (no improvement)</text>
  
  <text x="680" y="505" font-family="Arial, sans-serif" font-size="10" fill="#ecfdf5">Train/Valid Splits</text>
  <text x="680" y="522" font-family="Arial, sans-serif" font-size="10" fill="#ecfdf5">Safe Execution</text>
  <text x="680" y="539" font-family="Arial, sans-serif" font-size="10" fill="#ecfdf5">Iterative Refinement</text>
  
  <text x="840" y="505" font-family="Arial, sans-serif" font-size="10" fill="#ecfdf5">Error Recovery</text>
  <text x="840" y="522" font-family="Arial, sans-serif" font-size="10" fill="#ecfdf5">Feedback Loop</text>
  <text x="840" y="539" font-family="Arial, sans-serif" font-size="10" fill="#ecfdf5">State Management</text>
  
  <!-- Arrow from code to validation -->
  <path d="M 600 400 L 600 430" stroke="#10b981" stroke-width="3" fill="none" marker-end="url(#arrowDown)"/>
  
  <!-- Decision: Accept or Escalate -->
  <polygon points="600,570 650,590 600,610 550,590" fill="#fef3c7" stroke="#f59e0b" stroke-width="2.5" filter="url(#shadow)"/>
  <text x="600" y="585" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#92400e" text-anchor="middle">Accept?</text>
  <text x="600" y="600" font-family="Arial, sans-serif" font-size="10" fill="#92400e" text-anchor="middle">Feature</text>
  
  <!-- Arrow from validation to decision -->
  <path d="M 600 550 L 600 570" stroke="#10b981" stroke-width="2.5" fill="none" marker-end="url(#arrowDown)"/>
  
  <!-- Accepted Features Output -->
  <rect x="750" y="565" width="250" height="50" rx="5" fill="#d1fae5" stroke="#10b981" stroke-width="2"/>
  <text x="875" y="585" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#065f46" text-anchor="middle">Accepted Features</text>
  <text x="875" y="602" font-family="Arial, sans-serif" font-size="10" fill="#047857" text-anchor="middle">Added to Dataset</text>
  
  <!-- Escalation Mechanism -->
  <rect x="100" y="565" width="250" height="50" rx="5" fill="url(#escalateGrad)" stroke="#f59e0b" stroke-width="2.5" filter="url(#shadow)"/>
  <text x="225" y="585" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#78350f" text-anchor="middle">Escalation (After Failures)</text>
  <text x="225" y="602" font-family="Arial, sans-serif" font-size="10" fill="#92400e" text-anchor="middle">7B SLM or LLM Fallback</text>
  
  <!-- Arrows from decision -->
  <path d="M 650 590 L 750 590" stroke="#10b981" stroke-width="2.5" fill="none" marker-end="url(#arrow)"/>
  <path d="M 550 590 L 350 590" stroke="#f59e0b" stroke-width="2.5" fill="none" marker-end="url(#arrow)"/>
  
  <!-- Feedback arrow from escalation back to controller -->
  <path d="M 100 590 Q 50 540 350 120" stroke="#f59e0b" stroke-width="2" fill="none" stroke-dasharray="5,3" marker-end="url(#arrowUp)"/>
  <text x="150" y="520" font-family="Arial, sans-serif" font-size="9" fill="#f59e0b" font-style="italic">Retry with larger model</text>
  
  <!-- Feedback arrow from validation back to controller (for iteration) -->
  <path d="M 300 490 Q 200 300 450 120" stroke="#3b82f6" stroke-width="2" fill="none" stroke-dasharray="5,3" marker-end="url(#arrowUp)"/>
  <text x="250" y="380" font-family="Arial, sans-serif" font-size="9" fill="#3b82f6" font-style="italic">Iteration feedback</text>
  
  <!-- Final Output -->
  <rect x="450" y="640" width="300" height="40" rx="5" fill="#dbeafe" stroke="#2563eb" stroke-width="2"/>
  <text x="600" y="658" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#1e3a8a" text-anchor="middle">Enhanced Dataset</text>
  <text x="600" y="673" font-family="Arial, sans-serif" font-size="10" fill="#1e40af" text-anchor="middle">With Generated Features</text>
  
  <!-- Arrow to final output -->
  <path d="M 875 615 L 600 640" stroke="#10b981" stroke-width="2.5" fill="none" marker-end="url(#arrowDown)"/>
  
  <!-- Key Benefits Box -->
  <rect x="850" y="430" width="270" height="120" rx="5" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
  <text x="985" y="450" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#92400e" text-anchor="middle">Key Benefits</text>
  <line x1="860" y1="455" x2="1110" y2="455" stroke="#f59e0b" stroke-width="1"/>
  <text x="865" y="473" font-family="Arial, sans-serif" font-size="9" fill="#78350f">✓ 10-30× Cost Reduction</text>
  <text x="865" y="488" font-family="Arial, sans-serif" font-size="9" fill="#78350f">✓ Sub-300ms Latency</text>
  <text x="865" y="503" font-family="Arial, sans-serif" font-size="9" fill="#78350f">✓ On-Premises Deployment</text>
  <text x="865" y="518" font-family="Arial, sans-serif" font-size="9" fill="#78350f">✓ Privacy-Preserving</text>
  <text x="865" y="533" font-family="Arial, sans-serif" font-size="9" fill="#78350f">✓ Task Specialization</text>
  <text x="865" y="548" font-family="Arial, sans-serif" font-size="9" fill="#78350f">✓ Interpretable Features</text>
  
</svg>

